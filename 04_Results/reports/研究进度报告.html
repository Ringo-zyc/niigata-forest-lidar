<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基于UAV的LiDAR单木识别与树木信息自动测量 - 研究进度报告</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            line-height: 1.8;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #fafafa;
        }

        h1,
        h2,
        h3,
        h4 {
            color: #1a5f2a;
            margin: 1.5em 0 0.8em;
        }

        h1 {
            font-size: 2em;
            text-align: center;
            border-bottom: 3px solid #1a5f2a;
            padding-bottom: 20px;
            margin-bottom: 10px;
        }

        h2 {
            font-size: 1.5em;
            border-left: 5px solid #2e8b57;
            padding-left: 15px;
            margin-top: 2em;
        }

        h3 {
            font-size: 1.2em;
            color: #2e8b57;
        }

        .header-info {
            text-align: center;
            margin-bottom: 30px;
            color: #666;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            margin: 5px;
        }

        .badge-green {
            background: #2e8b57;
            color: white;
        }

        .badge-blue {
            background: #4169e1;
            color: white;
        }

        .badge-orange {
            background: #ff8c00;
            color: white;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1em 0;
            background: white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #f5f5f5;
            font-weight: bold;
            color: #1a5f2a;
        }

        tr:nth-child(even) {
            background: #fafafa;
        }

        .important-box {
            background: #e8f5e9;
            border-left: 5px solid #2e8b57;
            padding: 15px 20px;
            margin: 1em 0;
            border-radius: 0 8px 8px 0;
        }

        .note-box {
            background: #e3f2fd;
            border-left: 5px solid #1976d2;
            padding: 15px 20px;
            margin: 1em 0;
            border-radius: 0 8px 8px 0;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 5px solid #ff9800;
            padding: 15px 20px;
            margin: 1em 0;
            border-radius: 0 8px 8px 0;
        }

        .error-box {
            background: #ffebee;
            border-left: 5px solid #f44336;
            padding: 15px 20px;
            margin: 1em 0;
            border-radius: 0 8px 8px 0;
        }

        code {
            background: #f5f5f5;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: "Monaco", "Consolas", monospace;
            font-size: 0.9em;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1em 0;
        }

        pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }

        .screenshot {
            width: 100%;
            max-width: 800px;
            margin: 1em auto;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .screenshot-caption {
            text-align: center;
            color: #666;
            font-size: 0.9em;
            margin-bottom: 1.5em;
        }

        .toc {
            background: white;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin: 2em 0;
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
        }

        .toc a {
            color: #2e8b57;
            text-decoration: none;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 1.5em 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #2e8b57;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .workflow-diagram {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 1em 0;
        }

        .workflow-step {
            display: inline-block;
            padding: 10px 20px;
            background: #e8f5e9;
            border-radius: 25px;
            margin: 5px;
            border: 2px solid #2e8b57;
        }

        .workflow-arrow {
            display: inline-block;
            margin: 0 10px;
            color: #2e8b57;
            font-size: 1.5em;
        }

        hr {
            border: none;
            border-top: 2px solid #eee;
            margin: 2em 0;
        }

        .footer {
            text-align: center;
            color: #666;
            padding-top: 30px;
            border-top: 2px solid #eee;
            margin-top: 40px;
        }

        .distribution-bar {
            background: #e8f5e9;
            border-radius: 4px;
            padding: 15px;
            margin: 1em 0;
            font-family: monospace;
        }

        .dataset-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 1em 0;
        }

        .dataset-title {
            color: #1a5f2a;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        @media print {
            body {
                background: white;
                padding: 20px;
            }

            .screenshot {
                max-width: 100%;
                page-break-inside: avoid;
            }

            h2 {
                page-break-after: avoid;
            }

            table {
                page-break-inside: avoid;
            }
        }
    </style>
</head>

<body>

    <h1>🌲 基于UAV搭载LiDAR的单木识别与树木信息自动测量</h1>

    <div class="header-info">
        <h2 style="border: none; text-align: center; padding: 0; margin: 10px 0;">研究进度报告（预备调查阶段）</h2>
        <p>
            <span class="badge badge-green">版本 1.0</span>
            <span class="badge badge-blue">状态: 预备调查·学习阶段</span>
            <span class="badge badge-orange">报告日期: 2026年01月29日</span>
        </p>
        <p><strong>新潟森林调查项目</strong></p>
    </div>

    <hr>

    <div class="warning-box">
        <strong>📌 关于本报告:</strong> 本报告总结了研究预备调查阶段的学习内容和初步处理尝试的结果。记载的方法和结果属于面向未来正式研究的探索性工作，并非最终研究成果。
    </div>

    <div class="toc">
        <h3>📋 目录</h3>
        <ul>
            <li>1. <a href="#sec1">研究背景与目的</a></li>
            <li>2. <a href="#sec2">使用数据集</a></li>
            <li>3. <a href="#sec3">学习的处理流程</a></li>
            <li>4. <a href="#sec4">尝试结果（按数据集分类）</a></li>
            <li>5. <a href="#sec5">现阶段的问题认识</a></li>
            <li>6. <a href="#sec6">未来学习·研究的可能性</a></li>
        </ul>
    </div>

    <hr>

    <h2 id="sec1">1. 研究背景与目的</h2>

    <h3>1.1 研究主题</h3>
    <p>本研究旨在学习<strong>利用UAV搭载LiDAR点云数据进行单木识别和树木信息自动测量</strong>，加深对基本处理流程的理解。</p>

    <h3>1.2 预备调查的目的</h3>
    <p>在此阶段，我们的目标是加深对以下方面的理解：</p>
    <ul>
        <li>掌握点云数据的基本预处理方法</li>
        <li>理解CloudCompare等现有工具的操作方法</li>
        <li>把握单木检测的基本方法</li>
        <li>整理面向未来研究的问题和可能性</li>
    </ul>

    <h3>1.3 现阶段达成情况</h3>
    <div class="note-box">
        本报告是学习阶段的记录，总结了基本处理流程的尝试结果。算法评估和方法比较检讨是今后的课题。
    </div>

    <hr>

    <h2 id="sec2">2. 使用数据集</h2>

    <p>在预备调查中，我们使用了两个开放数据集来学习处理流程。</p>

    <div class="dataset-section">
        <div class="dataset-title">📁 数据集1: San Juan Fault</div>
        <table>
            <tr>
                <th>项目</th>
                <th>内容</th>
            </tr>
            <tr>
                <td>数据大小</td>
                <td>约1.1 GB</td>
            </tr>
            <tr>
                <td>地形特征</td>
                <td>山岳地形（包含陡峭斜坡）</td>
            </tr>
            <tr>
                <td>使用目的</td>
                <td>学习CSF滤波、高度归一化</td>
            </tr>
            <tr>
                <td>处理状况</td>
                <td>尝试了前处理流程</td>
            </tr>
        </table>
    </div>

    <div class="dataset-section">
        <div class="dataset-title">📁 数据集2: StREAM Lab</div>
        <table>
            <tr>
                <th>项目</th>
                <th>内容</th>
            </tr>
            <tr>
                <td>数据大小</td>
                <td>约473 MB</td>
            </tr>
            <tr>
                <td>地形特征</td>
                <td>相对平坦的森林区域</td>
            </tr>
            <tr>
                <td>使用目的</td>
                <td>尝试RANSAC圆柱检测</td>
            </tr>
            <tr>
                <td>处理状况</td>
                <td>单木检测算法的初步测试</td>
            </tr>
        </table>
    </div>

    <hr>

    <h2 id="sec3">3. 学习的处理流程</h2>

    <h3>3.1 整体流程</h3>
    <div class="workflow-diagram">
        <span class="workflow-step">点云数据读取</span>
        <span class="workflow-arrow">→</span>
        <span class="workflow-step">预处理</span>
        <span class="workflow-arrow">→</span>
        <span class="workflow-step">单木检测</span>
        <span class="workflow-arrow">→</span>
        <span class="workflow-step">参数提取</span>
    </div>

    <h3>3.2 学习的主要处理步骤</h3>

    <h4>① 数据读取和Global Shift设置</h4>
    <p>学习了处理大规模坐标系数据的基本设置。</p>
    <img class="screenshot" src="images/打开文件前的询问设置.png" alt="文件读取设置">
    <p class="screenshot-caption">图1: 读取设置界面</p>

    <img class="screenshot" src="images/Global Shift:Scale.png" alt="Global Shift设置">
    <p class="screenshot-caption">图2: Global Shift设置</p>

    <h4>② 通过CSF（布料模拟滤波）进行地面滤波</h4>
    <p>学习了分离地面点和非地面点的方法。</p>
    <img class="screenshot" src="images/CSF (布料模拟滤波)算法处理.png" alt="CSF滤波">
    <p class="screenshot-caption">图3: CSF滤波界面</p>

    <img class="screenshot" src="images/Exp1_CSF_Ground_BadAndGood_IsoView.png" alt="CSF结果">
    <p class="screenshot-caption">图4: CSF处理结果示例（等角图）</p>

    <img class="screenshot" src="images/Exp1_CSF_Ground_BadAndGood侧面_IsoView.png" alt="CSF侧面图">
    <p class="screenshot-caption">图5: CSF处理结果示例（侧面图）</p>

    <h4>③ 高度归一化</h4>
    <p>尝试了计算相对于地面的相对高度的处理。</p>
    <img class="screenshot" src="images/归一化参数选择.png" alt="归一化参数">
    <p class="screenshot-caption">图6: 高度归一化参数设置</p>

    <img class="screenshot" src="images/高度归一化.png" alt="高度归一化">
    <p class="screenshot-caption">图7: 高度归一化处理</p>

    <img class="screenshot" src="images/高度归一化计算后的渲染图.png" alt="归一化结果">
    <p class="screenshot-caption">图8: 归一化后的渲染结果</p>

    <h4>④ 区域提取和切片处理</h4>
    <p>学习了目标区域的裁剪方法。</p>
    <img class="screenshot" src="images/裁剪盒 (Clipping Box)工具.png" alt="裁剪">
    <p class="screenshot-caption">图9: 裁剪盒工具</p>

    <img class="screenshot" src="images/切片(Slice).png" alt="切片">
    <p class="screenshot-caption">图10: 切片处理</p>

    <h4>⑤ RANSAC圆柱检测尝试</h4>
    <p>作为传统形状检测算法之一，尝试了RANSAC圆柱拟合。</p>
    <img class="screenshot" src="images/RANSAC设置.png" alt="RANSAC设置">
    <p class="screenshot-caption">图11: RANSAC设置界面（CloudCompare功能）</p>

    <img class="screenshot" src="images/RANSAC结果.png" alt="RANSAC结果">
    <p class="screenshot-caption">图12: RANSAC检测结果示例（CloudCompare可视化）</p>

    <div class="note-box">
        <strong>💡 关于实现方法的选择:</strong><br>
        CloudCompare虽然有RANSAC圆柱检测功能，但发现存在以下限制：
        <ul style="margin-top: 10px;">
            <li>检测到的圆柱体的半径、高度等详细数据<strong>无法批量导出</strong></li>
            <li>难以进行后续的统计分析和数据处理</li>
        </ul>
        因此，我们<strong>使用Python（Open3D）自行实现了RANSAC算法</strong>，使检测结果能够以CSV格式输出。CloudCompare主要用于预处理和结果的可视化确认。
    </div>

    <hr>

    <h2 id="sec4">4. 尝试结果（按数据集分类）</h2>

    <h3>4.1 San Juan Fault 数据集</h3>
    <div class="dataset-section">
        <p><strong>主要尝试内容:</strong></p>
        <ul>
            <li>尝试了通过CSF滤波进行地面点分离</li>
            <li>应用了高度归一化处理</li>
            <li>尝试了不同高度的切片提取</li>
            <li>确认了山岳地形处理的困难性</li>
        </ul>

        <p><strong>确认的要点:</strong></p>
        <ul>
            <li>山岳地形需要谨慎调整CSF参数</li>
            <li>由于存在陡峭斜坡，简单的高度归一化不够充分</li>
            <li>数据量大，处理耗时</li>
        </ul>
    </div>

    <img class="screenshot" src="images/俯视图_地面红色.png" alt="San Juan俯视图">
    <p class="screenshot-caption">图13: San Juan Fault 数据的俯视图（地面点显示为红色）</p>

    <img class="screenshot" src="images/5m切片ransac识别结果.png" alt="5m切片结果">
    <p class="screenshot-caption">图14: 5m切片处理尝试示例</p>

    <div class="error-box">
        <strong>⚠️ 重要问题认识:</strong><br>
        在San Juan数据集上尝试性地执行RANSAC检测时，检测出了大量具有物理上不可能的高度值（130m～190m）的圆柱体。可能的原因包括：<br>
        <ul style="margin-top: 10px;">
            <li><strong>地形影响:</strong> 山岳地形的陡峭斜坡或悬崖可能被误检测为圆柱体</li>
            <li><strong>坐标系问题:</strong> Z轴的缩放设置或高度归一化可能不适当</li>
            <li><strong>参数未调整:</strong> 未设置RANSAC的最大高度约束或圆柱体倾斜约束</li>
        </ul>
        <em>→ 认识到此数据集应按照原计划用于学习预处理方法，单木检测应在StREAM Lab数据上进行。</em>
    </div>

    <h3>4.2 StREAM Lab 数据集</h3>
    <div class="dataset-section">
        <p><strong>主要尝试内容:</strong></p>
        <ul>
            <li>尝试了通过RANSAC圆柱拟合进行树干检测</li>
            <li>CSV格式的检测结果输出</li>
            <li>确认了基本统计值</li>
        </ul>
    </div>

    <img class="screenshot" src="images/segment.png" alt="分割处理">
    <p class="screenshot-caption">图15: StREAM Lab数据的分割处理</p>

    <img class="screenshot" src="images/计算法向量 (Compute Normals).png" alt="法线计算">
    <p class="screenshot-caption">图16: 法线向量计算</p>

    <h4>尝试结果概要（参考值）</h4>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">61个</div>
            <div class="stat-label">检测到的圆柱数</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">13.5 cm</div>
            <div class="stat-label">平均DBH（参考）</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">12.1 m</div>
            <div class="stat-label">平均高度（参考）</div>
        </div>
    </div>

    <p><em>※这些数值是尝试阶段的参考值，未进行精度验证。</em></p>

    <h4>检测结果样本（前5棵）</h4>
    <table>
        <thead>
            <tr>
                <th>序号</th>
                <th>DBH(cm)</th>
                <th>高度(m)</th>
                <th>点数</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>15.70</td>
                <td>14.13</td>
                <td>167</td>
            </tr>
            <tr>
                <td>2</td>
                <td>15.67</td>
                <td>14.10</td>
                <td>86</td>
            </tr>
            <tr>
                <td>3</td>
                <td>15.31</td>
                <td>13.78</td>
                <td>87</td>
            </tr>
            <tr>
                <td>4</td>
                <td>15.30</td>
                <td>13.77</td>
                <td>87</td>
            </tr>
            <tr>
                <td>5</td>
                <td>15.25</td>
                <td>13.73</td>
                <td>113</td>
            </tr>
        </tbody>
    </table>

    <h4>DBH分布（参考）</h4>
    <div class="distribution-bar" style="white-space: pre;">
        DBH分布
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        [10, 15) cm ████████████████████████████████████████ 54个 (88.5%)
        [15, 20) cm █████ 7个 (11.5%)
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>

    <hr>

    <h2 id="sec5">5. 现阶段的问题认识</h2>

    <h3>5.1 技术性问题</h3>
    <table>
        <thead>
            <tr>
                <th>问题</th>
                <th>详细</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>地形适应性</td>
                <td>山岳地形出现大量异常值。需要根据地形进行预处理</td>
            </tr>
            <tr>
                <td>参数调整</td>
                <td>需要学习RANSAC的高度约束、倾斜约束等设置方法</td>
            </tr>
            <tr>
                <td>算法选择</td>
                <td>需要比较检讨RANSAC以外的方法</td>
            </tr>
            <tr>
                <td>精度验证方法</td>
                <td>需要学习检测结果的评估方法</td>
            </tr>
            <tr>
                <td>预处理自动化</td>
                <td>目前手动操作较多，有效率化的余地</td>
            </tr>
        </tbody>
    </table>

    <h3>5.2 需要加深理解的领域</h3>
    <ul>
        <li>点云处理的理论背景</li>
        <li>森林测量学的基础知识</li>
        <li>现有研究的回顾</li>
        <li>编程（Python、Open3D等）技能提升</li>
        <li>地形造成的误差因素分析</li>
    </ul>

    <hr>

    <h2 id="sec6">6. 未来学习·研究的可能性</h2>

    <div class="important-box">
        <strong>📌 注记:</strong> 以下是未来学习、检讨的可能方向列表。具体研究计划将通过今后的学习来决定。
    </div>

    <h3>6.1 算法·方法方面的可能性</h3>
    <table>
        <thead>
            <tr>
                <th>类别</th>
                <th>方法·途径示例</th>
                <th>特点</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>传统算法</strong></td>
                <td>
                    • RANSAC（含改良版）<br>
                    • 分水岭算法（Watershed）<br>
                    • 区域生长法（Region Growing）<br>
                    • 聚类（DBSCAN等）<br>
                    • Hough变换
                </td>
                <td>可解释性高，需要参数调整</td>
            </tr>
            <tr>
                <td><strong>机器学习</strong></td>
                <td>
                    • PointNet / PointNet++<br>
                    • 3D-CNN<br>
                    • Random Forest<br>
                    • 语义分割（Semantic Segmentation）
                </td>
                <td>高精度可能性，需要大量训练数据</td>
            </tr>
            <tr>
                <td><strong>混合方法</strong></td>
                <td>
                    • 传统方法+机器学习的组合<br>
                    • 多尺度分析
                </td>
                <td>可发挥各方法的优势</td>
            </tr>
        </tbody>
    </table>

    <h3>6.2 处理流程方面的可能性</h3>
    <ul>
        <li>根据地形类型的自适应参数设置</li>
        <li>构建自动化工作流程</li>
        <li>GUI工具的开发·改良</li>
        <li>批处理系统的检讨</li>
    </ul>

    <h3>6.3 应用领域方面的可能性</h3>
    <ul>
        <li>检讨对不同树种·森林类型的适用可能性</li>
        <li>利用时序数据进行生长监测</li>
        <li>应用于生物量估算·碳储量评估</li>
        <li>森林管理·林业的实用化</li>
    </ul>

    <h3>6.4 精度·验证方面的可能性</h3>
    <ul>
        <li>检讨与地面真值数据的对照方法</li>
        <li>与其他测量方法（TLS等）的比较</li>
        <li>误差因素的分析和降低方法</li>
        <li>不同条件下的性能评估</li>
    </ul>

    <hr>

    <h2>📁 附录：项目构成</h2>
    <pre><code>Niigata_Research_Prep/
├── 00_Raw_Data/          # 原始LiDAR数据
├── 01_Processed/         # 处理中的数据
├── 02_Screenshots/       # 操作记录截图
│   ├── San Juan Fault/   # San Juan数据处理界面
│   └── StREAM Lab/       # StREAM Lab数据处理界面
├── 03_Scripts/           # 试作脚本
├── 04_Results/           # 尝试结果
│   ├── StREAM Lab/       # StREAM Lab检测结果
│   └── reports/          # 本报告
└── README.md</code></pre>

    <hr>

    <div class="footer">
        <p><strong>报告制作日期</strong>: 2026年01月29日 | <strong>负责人</strong>: zyc | <strong>阶段</strong>: 预备调查</p>
        <p><em>本报告是学习阶段的记录，作为面向未来研究的基础资料而制作。</em></p>
    </div>

</body>

</html>